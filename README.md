Tema 1 SDA

Implementarea este impartita in 3 fisiere de tip.c si 3 fisiere headere. Fisierul Implementation este cel in care se afla functia main, fisierul Stacks este cel in care sunt scrise functiile corespunzatoare celor doua stive de UNDO/REDO iar fisierul UndoStack.h contine definirea lor. Functiile ce au in vedere operatiile pe “banda” implementata ca si coada dublu inlantuita se afla in List.c si definirea in ListSort.h. In final, pentru implementarea cozii de EXECUTE am ales sa utilizez doar un header, numit ExecuteQueue.h.
Respectand cerintele temei, am scris o structura de tip lista dublu inlantuita cu santinela pentru a stoca informatiile referitoare la banda magica. Am pornit de la implementarile din curs pe care le-am adaptat cerintei, adaugand o structura noua "Band" care contine un pointer la pozitia curenta a  degetului si un pointer catre lista. Ulterior am adaugat functiile de creeare de nod, de lista si initializarea listei cu santinela si a benzii si toate functiile ce opereaza banda, MOVE,WRITE etc, cele de SHOW, precum si functia de dealocare a memoriei.
Pentru retinerea instructiunilor am utilizat o coada implementata ca o lista simplu inlantuita, iar in structura “queue” am retinut lungimea, precum si pointeri catre primul si respective ultimul element al acesteia. Am scris functiile specifice acestui tip de structura “enqueue” si “dequeue”, precum si alte functii auxiliare: initQueue, freeNode etc.
Stivele de UNDO si REDO sunt realizate ca liste simplu inlantuite in care am retinut un pointer catre urmatorul element, precum si un void pointer ce retine adresa pozitiei de pe banda la care trebuie mutat degetul in urma comenzii de UNDO/REDO. Am considerat ca acest tip de pointer ar fi cea mai buna optiune, deoarece imi permite sa am organizare cat mai buna a fisierelor, separand fiecare tip de date. In fisierul UndoStack.h se gasesc definirile functiilor pop si push pentru ambele stive, precum si functiile de creeare si dealocare de memorie pentru acestea.
Implementation.c este fisierul in care se afla functia main. Primele linii din aceasta sunt initializarile stivelor, benzii si a cozii, fisierele de input si output, precum si a variabilelor de care am nevoie pentru a citi din fisier: un char* pentru care am alocat memorie si un char c. Dupa aceea, am scris functiile undo si redo, care se ocupa cu apelarea functiilor de push pe cealalta stiva /pop pe aceasta stiva si modificarea pointerului “current” la pozitia retinuta, facand cast la Node*. Functia execute primeste ca parametrii lista, coada(din care se citesc instructiunile ce urmeaza a fi executate) si stiva de undo, pentru ca aceasta sa permita modificarea benzii si inserarea in stiva, in final aceasta apeleaza dequeue ce are ca efect eliminarea instructiunii deja executate din coada. Citirea din fisier se realizeaza cu fscanf, intai citind numarul de operatii. In stringul s se citeste instructiunea, iar in cazul in care aceasta este una din cele care primeste si un parametru, se citeste si acela in variabile c, ulterior fiind introduse in coada. In cazul operatiilor fara parametru, acestea sunt introduse in coada cu caracterul „|” deoarece acesta se garanteaza ca nu va fi un caracter posibil. Daca operatiile sunt de tip SHOW sau UNDO/REDO se apeleaza direct functia corespunzatoare. La final sunt apelate toate functiile de dealocare a memoriei, pentru a ne asigura ca este eliberata corespunzator.

